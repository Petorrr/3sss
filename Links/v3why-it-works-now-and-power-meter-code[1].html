<!DOCTYPE html>
<html class='v2' dir='ltr' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<link href='https://www.blogger.com/static/v1/widgets/521441841-css_bundle_v2.css' rel='stylesheet' type='text/css'/>
<meta content='IE=EmulateIE7' http-equiv='X-UA-Compatible'/>
<meta content='width=1100' name='viewport'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<meta content='blogger' name='generator'/>
<link href='http://keithhack.blogspot.nl/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Keith Hack - Atom" href="http://keithhack.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Keith Hack - RSS" href="http://keithhack.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Keith Hack - Atom" href="https://www.blogger.com/feeds/831309579862171927/posts/default" />

<link rel="alternate" type="application/atom+xml" title="Keith Hack - Atom" href="http://keithhack.blogspot.com/feeds/7380089556979717873/comments/default" />
<!--[if IE]><script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/35781802-ieretrofit.js"></script>
<![endif]-->
<link href='http://lh3.ggpht.com/-DtT9GCwF4RA/UOuMNw3EgSI/AAAAAAAABq0/GHC00CZT6lU/DSC_9045a_thumb%25255B1%25255D.jpg?imgmax=800' rel='image_src'/>
<meta content='http://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html' property='og:url'/>
<meta content='V3–Why it works now and the Power Meter CODE!' property='og:title'/>
<meta content='      In the above picture you’ll see the MOSI (Master out Slave in) and RTS connection point for the AP2 module on the other side. There wa...' property='og:description'/>
<meta content='http://lh3.ggpht.com/-DtT9GCwF4RA/UOuMNw3EgSI/AAAAAAAABq0/GHC00CZT6lU/w1200-h630-p-k-no-nu/DSC_9045a_thumb%25255B1%25255D.jpg?imgmax=800' property='og:image'/>
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>Keith Hack: V3&#8211;Why it works now and the Power Meter CODE!</title>
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Awesome Inc.
Designer: Tina Chen
URL:      tinachen.org
----------------------------------------------- */

/* Content
----------------------------------------------- */
body {
font: normal normal 13px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
background: #eeeeee none repeat scroll top left;
}
html body .content-outer {
min-width: 0;
max-width: 100%;
width: 100%;
}
a:link {
text-decoration: none;
color: #3778cd;
}
a:visited {
text-decoration: none;
color: #4d469c;
}
a:hover {
text-decoration: underline;
color: #3778cd;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 276px;
width: 100%;
background: transparent none repeat-x scroll top left;
_background-image: none;
}
/* Columns
----------------------------------------------- */
.content-inner {
padding: 0;
}
.header-inner .section {
margin: 0 16px;
}
.tabs-inner .section {
margin: 0 16px;
}
.main-inner {
padding-top: 30px;
}
.main-inner .column-center-inner,
.main-inner .column-left-inner,
.main-inner .column-right-inner {
padding: 0 5px;
}
*+html body .main-inner .column-center-inner {
margin-top: -30px;
}
#layout .main-inner .column-center-inner {
margin-top: 0;
}
/* Header
----------------------------------------------- */
.header-outer {
margin: 0 0 0 0;
background: transparent none repeat scroll 0 0;
}
.Header h1 {
font: normal bold 40px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
text-shadow: 0 0 -1px #000000;
}
.Header h1 a {
color: #444444;
}
.Header .description {
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
.header-inner .Header .titlewrapper,
.header-inner .Header .descriptionwrapper {
padding-left: 0;
padding-right: 0;
margin-bottom: 0;
}
.header-inner .Header .titlewrapper {
padding-top: 22px;
}
/* Tabs
----------------------------------------------- */
.tabs-outer {
overflow: hidden;
position: relative;
background: #eeeeee url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png) repeat scroll 0 0;
}
#layout .tabs-outer {
overflow: visible;
}
.tabs-cap-top, .tabs-cap-bottom {
position: absolute;
width: 100%;
border-top: 1px solid #999999;
}
.tabs-cap-bottom {
bottom: 0;
}
.tabs-inner .widget li a {
display: inline-block;
margin: 0;
padding: .6em 1.5em;
font: normal bold 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
border-left: 1px solid #999999;
height: 16px;
line-height: 16px;
}
.tabs-inner .widget li:last-child a {
border-right: 1px solid #999999;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
background: #666666 url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png) repeat-x scroll 0 -100px;
color: #ffffff;
}
/* Headings
----------------------------------------------- */
h2 {
font: normal bold 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
/* Widgets
----------------------------------------------- */
.main-inner .section {
margin: 0 27px;
padding: 0;
}
.main-inner .column-left-outer,
.main-inner .column-right-outer {
margin-top: 0;
}
#layout .main-inner .column-left-outer,
#layout .main-inner .column-right-outer {
margin-top: 0;
}
.main-inner .column-left-inner,
.main-inner .column-right-inner {
background: transparent none repeat 0 0;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
-goog-ms-border-radius: 0;
border-radius: 0;
}
#layout .main-inner .column-left-inner,
#layout .main-inner .column-right-inner {
margin-top: 0;
}
.sidebar .widget {
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
.sidebar .widget a:link {
color: #3778cd;
}
.sidebar .widget a:visited {
color: #4d469c;
}
.sidebar .widget a:hover {
color: #3778cd;
}
.sidebar .widget h2 {
text-shadow: 0 0 -1px #000000;
}
.main-inner .widget {
background-color: #ffffff;
border: 1px solid #eeeeee;
padding: 0 15px 15px;
margin: 20px -16px;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
-goog-ms-border-radius: 0;
border-radius: 0;
}
.main-inner .widget h2 {
margin: 0 -15px;
padding: .6em 15px .5em;
border-bottom: 1px solid transparent;
}
.footer-inner .widget h2 {
padding: 0 0 .4em;
border-bottom: 1px solid transparent;
}
.main-inner .widget h2 + div, .footer-inner .widget h2 + div {
border-top: 1px solid #eeeeee;
padding-top: 8px;
}
.main-inner .widget .widget-content {
margin: 0 -15px;
padding: 7px 15px 0;
}
.main-inner .widget ul, .main-inner .widget #ArchiveList ul.flat {
margin: -8px -15px 0;
padding: 0;
list-style: none;
}
.main-inner .widget #ArchiveList {
margin: -8px 0 0;
}
.main-inner .widget ul li, .main-inner .widget #ArchiveList ul.flat li {
padding: .5em 15px;
text-indent: 0;
color: #666666;
border-top: 1px solid #eeeeee;
border-bottom: 1px solid transparent;
}
.main-inner .widget #ArchiveList ul li {
padding-top: .25em;
padding-bottom: .25em;
}
.main-inner .widget ul li:first-child, .main-inner .widget #ArchiveList ul.flat li:first-child {
border-top: none;
}
.main-inner .widget ul li:last-child, .main-inner .widget #ArchiveList ul.flat li:last-child {
border-bottom: none;
}
.post-body {
position: relative;
}
.main-inner .widget .post-body ul {
padding: 0 2.5em;
margin: .5em 0;
list-style: disc;
}
.main-inner .widget .post-body ul li {
padding: 0.25em 0;
margin-bottom: .25em;
color: #444444;
border: none;
}
.footer-inner .widget ul {
padding: 0;
list-style: none;
}
.widget .zippy {
color: #666666;
}
/* Posts
----------------------------------------------- */
body .main-inner .Blog {
padding: 0;
margin-bottom: 1em;
background-color: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
-goog-ms-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
box-shadow: 0 0 0 rgba(0, 0, 0, 0);
}
.main-inner .section:last-child .Blog:last-child {
padding: 0;
margin-bottom: 1em;
}
.main-inner .widget h2.date-header {
margin: 0 -15px 1px;
padding: 0 0 0 0;
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
background: transparent none no-repeat scroll top left;
border-top: 0 solid #eeeeee;
border-bottom: 1px solid transparent;
-moz-border-radius-topleft: 0;
-moz-border-radius-topright: 0;
-webkit-border-top-left-radius: 0;
-webkit-border-top-right-radius: 0;
border-top-left-radius: 0;
border-top-right-radius: 0;
position: static;
bottom: 100%;
right: 15px;
text-shadow: 0 0 -1px #000000;
}
.main-inner .widget h2.date-header span {
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
display: block;
padding: .5em 15px;
border-left: 0 solid #eeeeee;
border-right: 0 solid #eeeeee;
}
.date-outer {
position: relative;
margin: 30px 0 20px;
padding: 0 15px;
background-color: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
-goog-ms-border-radius: 0;
border-radius: 0;
}
.date-outer:first-child {
margin-top: 0;
}
.date-outer:last-child {
margin-bottom: 20px;
-moz-border-radius-bottomleft: 0;
-moz-border-radius-bottomright: 0;
-webkit-border-bottom-left-radius: 0;
-webkit-border-bottom-right-radius: 0;
-goog-ms-border-bottom-left-radius: 0;
-goog-ms-border-bottom-right-radius: 0;
border-bottom-left-radius: 0;
border-bottom-right-radius: 0;
}
.date-posts {
margin: 0 -15px;
padding: 0 15px;
clear: both;
}
.post-outer, .inline-ad {
border-top: 1px solid #eeeeee;
margin: 0 -15px;
padding: 15px 15px;
}
.post-outer {
padding-bottom: 10px;
}
.post-outer:first-child {
padding-top: 0;
border-top: none;
}
.post-outer:last-child, .inline-ad:last-child {
border-bottom: none;
}
.post-body {
position: relative;
}
.post-body img {
padding: 8px;
background: transparent;
border: 1px solid transparent;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
border-radius: 0;
}
h3.post-title, h4 {
font: normal bold 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
h3.post-title a {
font: normal bold 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
h3.post-title a:hover {
color: #3778cd;
text-decoration: underline;
}
.post-header {
margin: 0 0 1em;
}
.post-body {
line-height: 1.4;
}
.post-outer h2 {
color: #444444;
}
.post-footer {
margin: 1.5em 0 0;
}
#blog-pager {
padding: 15px;
font-size: 120%;
background-color: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
-goog-ms-border-radius: 0;
border-radius: 0;
-moz-border-radius-topleft: 0;
-moz-border-radius-topright: 0;
-webkit-border-top-left-radius: 0;
-webkit-border-top-right-radius: 0;
-goog-ms-border-top-left-radius: 0;
-goog-ms-border-top-right-radius: 0;
border-top-left-radius: 0;
border-top-right-radius-topright: 0;
margin-top: 1em;
}
.blog-feeds, .post-feeds {
margin: 1em 0;
text-align: center;
color: #444444;
}
.blog-feeds a, .post-feeds a {
color: #3778cd;
}
.blog-feeds a:visited, .post-feeds a:visited {
color: #4d469c;
}
.blog-feeds a:hover, .post-feeds a:hover {
color: #3778cd;
}
.post-outer .comments {
margin-top: 2em;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
}
.comments .continue {
border-top: 2px solid #999999;
}
/* Footer
----------------------------------------------- */
.footer-outer {
margin: -20px 0 -1px;
padding: 20px 0 0;
color: #444444;
overflow: hidden;
}
.footer-fauxborder-left {
border-top: 1px solid #eeeeee;
background: #ffffff none repeat scroll 0 0;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
margin: 0 -20px;
}
/* Mobile
----------------------------------------------- */
body.mobile {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
*+html body.mobile .main-inner .column-center-inner {
margin-top: 0;
}
.mobile .main-inner .widget {
padding: 0 0 15px;
}
.mobile .main-inner .widget h2 + div,
.mobile .footer-inner .widget h2 + div {
border-top: none;
padding-top: 0;
}
.mobile .footer-inner .widget h2 {
padding: 0.5em 0;
border-bottom: none;
}
.mobile .main-inner .widget .widget-content {
margin: 0;
padding: 7px 0 0;
}
.mobile .main-inner .widget ul,
.mobile .main-inner .widget #ArchiveList ul.flat {
margin: 0 -15px 0;
}
.mobile .main-inner .widget h2.date-header {
right: 0;
}
.mobile .date-header span {
padding: 0.4em 0;
}
.mobile .date-outer:first-child {
margin-bottom: 0;
border: 1px solid #eeeeee;
-moz-border-radius-topleft: 0;
-moz-border-radius-topright: 0;
-webkit-border-top-left-radius: 0;
-webkit-border-top-right-radius: 0;
-goog-ms-border-top-left-radius: 0;
-goog-ms-border-top-right-radius: 0;
border-top-left-radius: 0;
border-top-right-radius: 0;
}
.mobile .date-outer {
border-color: #eeeeee;
border-width: 0 1px 1px;
}
.mobile .date-outer:last-child {
margin-bottom: 0;
}
.mobile .main-inner {
padding: 0;
}
.mobile .header-inner .section {
margin: 0;
}
.mobile .post-outer, .mobile .inline-ad {
padding: 5px 0;
}
.mobile .tabs-inner .section {
margin: 0 10px;
}
.mobile .main-inner .widget h2 {
margin: 0;
padding: 0;
}
.mobile .main-inner .widget h2.date-header span {
padding: 0;
}
.mobile .main-inner .widget .widget-content {
margin: 0;
padding: 7px 0 0;
}
.mobile #blog-pager {
border: 1px solid transparent;
background: #ffffff none repeat scroll 0 0;
}
.mobile .main-inner .column-left-inner,
.mobile .main-inner .column-right-inner {
background: transparent none repeat 0 0;
-moz-box-shadow: none;
-webkit-box-shadow: none;
-goog-ms-box-shadow: none;
box-shadow: none;
}
.mobile .date-posts {
margin: 0;
padding: 0;
}
.mobile .footer-fauxborder-left {
margin: 0;
border-top: inherit;
}
.mobile .main-inner .section:last-child .Blog:last-child {
margin-bottom: 0;
}
.mobile-index-contents {
color: #444444;
}
.mobile .mobile-link-button {
background: #3778cd url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png) repeat scroll 0 0;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .PageList .widget-content {
background: transparent;
border-top: 1px solid;
border-color: #999999;
color: #444444;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #999999;
}

--></style>
<style id='template-skin-1' type='text/css'><!--
body {
min-width: 1020px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 1020px;
max-width: 1020px;
_width: 1020px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 300px;
}
.main-inner .fauxcolumn-center-outer {
left: 0px;
right: 300px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0px") -
parseInt("300px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0px;
}
.main-inner .fauxcolumn-right-outer {
width: 300px;
}
.main-inner .column-left-outer {
width: 0px;
right: 100%;
margin-left: -0px;
}
.main-inner .column-right-outer {
width: 300px;
margin-right: -300px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
--></style>
<link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=831309579862171927&amp;zx=0a8acbbf-f9bf-4d12-a222-74896816e639' media='none' onload='if(media!=&#39;all&#39;)media=&#39;all&#39;' rel='stylesheet'/><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=831309579862171927&amp;zx=0a8acbbf-f9bf-4d12-a222-74896816e639' rel='stylesheet'/></noscript>
</head>
<body class='loading variant-light'>
<div class='navbar section' id='navbar'><div class='widget Navbar' data-version='1' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d831309579862171927\x26blogName\x3dKeith+Hack\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dLIGHT\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttp://keithhack.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://keithhack.blogspot.com/\x26targetPostID\x3d7380089556979717873\x26blogPostOrPageUrl\x3dhttp://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html\x26vt\x3d5222076140276988359',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div class='body-fauxcolumns'>
<div class='fauxcolumn-outer body-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content'>
<div class='content-fauxcolumns'>
<div class='fauxcolumn-outer content-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content-outer'>
<div class='content-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left content-fauxborder-left'>
<div class='fauxborder-right content-fauxborder-right'></div>
<div class='content-inner'>
<header>
<div class='header-outer'>
<div class='header-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left header-fauxborder-left'>
<div class='fauxborder-right header-fauxborder-right'></div>
<div class='region-inner header-inner'>
<div class='header section' id='header'><div class='widget Header' data-version='1' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://keithhack.blogspot.nl/'>
Keith Hack
</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span>
</span></p>
</div>
</div>
</div></div>
</div>
</div>
<div class='header-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</header>
<div class='tabs-outer'>
<div class='tabs-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left tabs-fauxborder-left'>
<div class='fauxborder-right tabs-fauxborder-right'></div>
<div class='region-inner tabs-inner'>
<div class='tabs no-items section' id='crosscol'></div>
<div class='tabs no-items section' id='crosscol-overflow'></div>
</div>
</div>
<div class='tabs-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='main-outer'>
<div class='main-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left main-fauxborder-left'>
<div class='fauxborder-right main-fauxborder-right'></div>
<div class='region-inner main-inner'>
<div class='columns fauxcolumns'>
<div class='fauxcolumn-outer fauxcolumn-center-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-left-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-right-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class='columns-inner'>
<div class='column-center-outer'>
<div class='column-center-inner'>
<div class='main section' id='main'><div class='widget Blog' data-version='1' id='Blog1'>
<div class='blog-posts hfeed'>

          <div class="date-outer">
        
<h2 class='date-header'><span>Monday, January 7, 2013</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='http://lh3.ggpht.com/-DtT9GCwF4RA/UOuMNw3EgSI/AAAAAAAABq0/GHC00CZT6lU/DSC_9045a_thumb%25255B1%25255D.jpg?imgmax=800' itemprop='image_url'/>
<meta content='831309579862171927' itemprop='blogId'/>
<meta content='7380089556979717873' itemprop='postId'/>
<a name='7380089556979717873'></a>
<h3 class='post-title entry-title' itemprop='name'>
V3&#8211;Why it works now and the Power Meter CODE!
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-7380089556979717873' itemprop='description articleBody'>
<p>&#160;</p>  <p><a href="http://lh4.ggpht.com/-uQ58jWKtX8I/UOuMNHnws0I/AAAAAAAABqs/lMUxfRsBUFI/s1600-h/DSC_9045a%25255B4%25255D.jpg"><img alt="DSC_9045a" border="0" height="430" src="http://lh3.ggpht.com/-DtT9GCwF4RA/UOuMNw3EgSI/AAAAAAAABq0/GHC00CZT6lU/DSC_9045a_thumb%25255B1%25255D.jpg?imgmax=800" style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="DSC_9045a" width="644" /></a></p>  <p>In the above picture you&#8217;ll see the MOSI (Master out Slave in) and RTS connection point for the AP2 module on the other side. There was a short. A super fine wire or a sliver of solder. Either way, there was a barely noticeable connection. More after the break including the working code!</p>  <a name='more'></a>  <p>I noticed this when I tried to incorporate the RTS line into the code to check when the AP2 thinks it&#8217;s okay to send. It didn&#8217;t work. I decided maybe the TX line floats and the signal isn&#8217;t getting through so I took a 10k resistor between TX and ground. Nothing. Then I thought, maybe the AP2 RTS line needs external termination. I didn&#8217;t think so, but figured I&#8217;d try by holding a resistor to the RTS. When I went to hold it in place I saw the sliver. I knew what could fix this!</p>  <p><a href="http://lh3.ggpht.com/-Ox5nUcyeVaE/UOuMOopFVUI/AAAAAAAABq8/WrTfXEn8o5Q/s1600-h/DSC_9046%25255B4%25255D.jpg"><img alt="DSC_9046" border="0" height="430" src="http://lh4.ggpht.com/-ncrY70rGhaw/UOuMPL_82DI/AAAAAAAABrE/nCv0XKV4pTs/DSC_9046_thumb%25255B1%25255D.jpg?imgmax=800" style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="DSC_9046" width="644" /></a></p>  <p>My trusty Gerber Clutch that cost me a total of 14.99 at Canadian Tire and has saved the day more than once. I cut the connection and voila! The event counts match up and the ANT+ USB stick with ANT Display Simulator never missed a beat! Below is the serial output with the counts. The last count is 20, and the last update is 20 in the Display Simulator. I included another one that has the received codes for a couple of updates.</p>  <p><a href="http://lh3.ggpht.com/-vFiveK9C0x0/UOuMQ-i8xcI/AAAAAAAABrM/Xh_vlmc2n5k/s1600-h/image%25255B3%25255D.png"><img alt="image" border="0" height="364" src="http://lh6.ggpht.com/-UBTYrGYEqGo/UOuMR-rffYI/AAAAAAAABrU/cnwLqcc2iaI/image_thumb%25255B1%25255D.png?imgmax=800" style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" width="644" /></a></p>  <p><a href="http://lh5.ggpht.com/-smojqLU1w8g/UOuMTI1xvFI/AAAAAAAABrc/hTvtes9B70I/s1600-h/image%25255B7%25255D.png"><img alt="image" border="0" height="364" src="http://lh5.ggpht.com/-9BmwjlHHWsM/UOuMUGOp-XI/AAAAAAAABrk/K7X95yX2V8E/image_thumb%25255B3%25255D.png?imgmax=800" style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" width="644" /></a></p>  <p>My code is below. The ANT+ network key is VETTED as a requirement of ANT+ licence agreement as an ANT+ Adopter. I love ANT+, I want to promote it, but I don&#8217;t want to anger the good folks at Dynastream / Garmin / and any hard working ANT+ Alliance member. ANT+, it just works&#8230; so long as you are decent at soldering?</p>  <p>Cheers</p>  <div class="csharpcode"></div> <style type="text/css"><br /><br />.csharpcode, .csharpcode pre<br />{<br />	font-size: small;<br />	color: black;<br />	font-family: consolas, "Courier New", courier, monospace;<br />	background-color: #ffffff;<br />	/*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt <br />{<br />	background-color: #f4f4f4;<br />	width: 100%;<br />	margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }</style>    <pre class="csharpcode"><span class="rem">/*</span><br /><span class="rem">  Keith Wakeham Power Meter</span><br /><span class="rem">  ANT+</span><br /><span class="rem">*/</span><br /><span class="preproc">#define</span> UCHAR unsigned <span class="kwrd">char</span><br /><span class="preproc">#define</span> MESG_TX_SYNC                      ((UCHAR)0xA4)<br /><span class="preproc">#define</span> MESG_SYSTEM_RESET_ID              ((UCHAR)0x4A)<br /><span class="preproc">#define</span> MESG_NETWORK_KEY_ID               ((UCHAR)0x46)<br /><span class="preproc">#define</span> MESG_ASSIGN_CHANNEL_ID            ((UCHAR)0x42)<br /><span class="preproc">#define</span> MESG_CHANNEL_ID_ID                ((UCHAR)0x51)<br /><span class="preproc">#define</span> MESG_CHANNEL_RADIO_FREQ_ID        ((UCHAR)0x45)<br /><span class="preproc">#define</span> MESG_CHANNEL_MESG_PERIOD_ID       ((UCHAR)0x43) <span class="rem">// Set channel period 0x43</span><br /><span class="preproc">#define</span> MESG_RADIO_TX_POWER_ID            ((UCHAR)0x47) <span class="rem">// Set Tx Power 0x47</span><br /><span class="preproc">#define</span> MESG_CHANNEL_SEARCH_TIMEOUT_ID    ((UCHAR)0x44) <span class="rem">// Set Channel Search Timeout 0x44</span><br /><span class="preproc">#define</span> MESG_OPEN_CHANNEL_ID              ((UCHAR)0x4B) <span class="rem">// ID Byte 0x4B</span><br /><span class="preproc">#define</span> MESG_BROADCAST_DATA_ID            ((UCHAR)0x4E)<br /><span class="rem">// inslude the SPI library:</span><br />#include &lt;SPI.h&gt;<br />#include &lt;TimerOne.h&gt;<br /><br /><span class="kwrd">const</span> <span class="kwrd">int</span> slaveSelectPinL = 9; <span class="rem">// set pin 8 as the slave select for Left ADC</span><br /><span class="kwrd">const</span> <span class="kwrd">int</span> slaveSelectPinR = 8; <span class="rem">// set pin 8 as the slave select for Left ADC</span><br /><span class="kwrd">const</span> <span class="kwrd">int</span> Mag_pickup = 6; <span class="rem">// set pin 8 as the slave select for Left ADC</span><br /><br /><span class="rem">//For ANT+ output</span><br /><span class="kwrd">byte</span> eventcount = 0;<br />uint16_t ANT_power = 0;<br />uint8_t ANT_icad = 0; <span class="rem">// Instant Cadence</span><br />uint16_t accucrankperiod = 0; <span class="rem">//Accumulated Crank Period</span><br />uint16_t ANT_Torque = 0;<br /><br /><span class="rem">//ADC data</span><br /><span class="kwrd">short</span> zeroL = 0;<br /><span class="kwrd">short</span> zeroR = 0;<br /><span class="kwrd">long</span> ADC_L = 0;<br /><span class="kwrd">short</span> ADCL_count = 0;<br /><span class="kwrd">long</span> ADC_R = 0;<br /><span class="kwrd">short</span> ADCR_count = 0;<br />boolean wipe = 0;<br /><br /><span class="kwrd">double</span> TorqueL = 0;<br /><span class="kwrd">double</span> TorqueR = 0;<br /><span class="kwrd">double</span> Torque_sum = 0;<br /><br />uint8_t ANT_LR = 0;<br />uint16_t ANT_Period = 0;<br /><span class="kwrd">long</span> ANT_cranktick = 0;<br /><span class="kwrd">long</span> ANT_cranktick_OLD = 0;<br /><span class="kwrd">byte</span> ANT_Cadence = 0;<br />boolean skipper = 0;<br /><br /><span class="rem">//message processor</span><br />boolean msgsync = 0;<br />uint8_t sync = 0;<br />uint8_t msglength = 0;<br />uint8_t msgbuf[10];<br />uint8_t sendcount = 0;<br /><br /><span class="kwrd">int</span> buttonState;             <span class="rem">// the current reading from the input pin</span><br /><span class="kwrd">int</span> lastButtonState = LOW;   <span class="rem">// the previous reading from the input pin</span><br /><span class="kwrd">long</span> lastDebounceTime = 0;  <span class="rem">// the last time the output pin was toggled</span><br /><span class="kwrd">long</span> debounceDelay = 30;    <span class="rem">// the debounce time; increase if the output flickers</span><br />boolean sent = 0;<br /><br /><span class="kwrd">void</span> setup() {<br />  pinMode (slaveSelectPinL, OUTPUT);  <span class="rem">// set the slaveSelectPin Left as an output:</span><br />  pinMode (slaveSelectPinR, OUTPUT);  <span class="rem">// set the slaveSelectPin Left as an output:</span><br />  pinMode(Mag_pickup, INPUT);<br />  digitalWrite(slaveSelectPinL,HIGH);<br />  digitalWrite(slaveSelectPinR,HIGH);<br />  SPI.setClockDivider(SPI_CLOCK_DIV4);  <span class="rem">// 8mhz, set the divider to 4</span><br />  SPI.begin();   <span class="rem">// initialize SPI:</span><br />  Serial1.begin(4800);<br />  Serial.begin(115200);<br />  delay(10);<br />  Serial1.flush();<br />  reset();<br />  delay(5000);<br />  Serial1.flush();<br />  delay(50);<br />  initiate();<br />  delay(20);<br />  <span class="rem">//Timer1.initialize(600000);</span><br />  <span class="rem">//Timer1.attachInterrupt(callback);</span><br />  zeroL = zeroadcL();<br />  zeroR = zeroadcR();<br /><span class="rem">//  Serial.print(&quot;LZ:&quot;);</span><br /><span class="rem">//  Serial.print(zeroL);</span><br /><span class="rem">//  Serial.print(&quot; RZ:_&quot;);</span><br /><span class="rem">//  Serial.println(zeroR);</span><br />}<br /><span class="kwrd">void</span> loop() {<br />  readadc_B();  <br />  ANTrec();<br />}<br /><br /><span class="kwrd">void</span> ANTrec()<br />{<br />  <span class="kwrd">int</span> sbuflength = Serial1.available();<br />  uint8_t msg = 0;<br />  <span class="kwrd">while</span>(sbuflength &gt; 0)<br />  {<br />    <span class="rem">//Serial.print(&quot;sbuf: &quot;);</span><br />    <span class="rem">//Serial.println(sbuflength);</span><br />    <span class="kwrd">if</span> (msgsync == 0)<br />    {<br />      msg = Serial1.read();<br />      <span class="kwrd">if</span> (msg == 0xA4)<br />      {<br />        msgsync = 1;<br />        sync = 0;<br />      }<br />      sbuflength = Serial1.available();<br /><br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (msgsync == 1 &amp;&amp; sync == 0)<br />    {<br />      msglength = Serial1.read();<br />      sbuflength = Serial1.available();<br />      msglength += 3;<br />      msgbuf[0] = 0xA4;<br />      msgbuf[1] = (msglength-3);<br />      sync++;<br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (msgsync == 1 &amp;&amp; sync &gt; 0 &amp;&amp; sync &lt; msglength)<br />    {<br />      msgbuf[sync+1] = Serial1.read();<br />      sbuflength = Serial1.available();<br />      sync++;<br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (msgsync == 1 &amp;&amp; sync == msglength)<br />    { <br />      msgbuf[sync+1] = Serial1.read();<br />      sbuflength = Serial1.available();<br />      ANTrecproc(msgbuf, msglength);<br />      <span class="rem">//Serial.println(&quot;&quot;);</span><br />      msgsync = 0;<br />      sync = 0;<br />      msglength = 0;<br />    }<br /><br />  }<br />}<br /><br /><span class="kwrd">void</span> ANTrecproc(uint8_t ANTbuf[], uint8_t ANTlength)<br />{<br />  <span class="kwrd">if</span> (ANTbuf[2] == 0x40)<br />  {<br />    <span class="kwrd">if</span> (ANTbuf[4] == 0x01) <span class="rem">//Transmit Event</span><br />    {<br />      <span class="kwrd">if</span> (ANTbuf[5] ==3)<br />      {<br />        <span class="rem">//Serial.println(&quot;transmit success&quot;);</span><br />        <span class="kwrd">if</span> (sendcount &lt; 4)<br />        {<br />          basicpower();<br />          sendcount++;<br />          <span class="rem">//Serial.println(&quot;Crank Torque&quot;);</span><br />        }<br />        <span class="kwrd">else</span> <span class="kwrd">if</span> (sendcount == 4)<br />        {<br />          basicpower();<br />          <span class="rem">//cranktorque();</span><br />          sendcount = 0;<br />          <span class="rem">//Serial.println(&quot;Basic Power&quot;);</span><br />        }<br />        <br />      }<br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (ANTbuf[4] == 0x46 ) <span class="rem">//Set Network Key</span><br />    {<br />      <span class="kwrd">if</span> (ANTbuf[5] ==0)<br />      {<br />        Serial.println(<span class="str">&quot;Set Netowork Key: No Error&quot;</span>);<br />      }<br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (ANTbuf[4] == 0x42 ) <span class="rem">// Assign Channel Assigned</span><br />    {<br />      <span class="kwrd">if</span> (ANTbuf[5] == 0)<br />      {<br />        Serial.println(<span class="str">&quot;Assign Channel: No Error&quot;</span>);<br />      }<br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (ANTbuf[4] == 0x51 ) <span class="rem">// Set Channel ID</span><br />    {<br />      <span class="kwrd">if</span> (ANTbuf[5] == 0)<br />      {<br />        Serial.println(<span class="str">&quot;Set Channel ID: No Error&quot;</span>);<br />      }      <br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (ANTbuf[4] == 0x45 ) <span class="rem">// Set Frequency</span><br />    {<br />      <span class="kwrd">if</span> (ANTbuf[5] == 0)<br />      {<br />        Serial.println(<span class="str">&quot;Set Frequency: No Error&quot;</span>);<br />      }      <br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (ANTbuf[4] == 0x43 ) <span class="rem">// Set Period</span><br />    {<br />      <span class="kwrd">if</span> (ANTbuf[5] == 0)<br />      {<br />        Serial.println(<span class="str">&quot;Set Period: No Error&quot;</span>);<br />      }      <br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (ANTbuf[4] == 0x47 ) <span class="rem">//Transmit Power</span><br />    {<br />      <span class="kwrd">if</span> (ANTbuf[5] == 0)<br />      {<br />        Serial.println(<span class="str">&quot;Transmit Power: No Error&quot;</span>);<br />      }      <br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (ANTbuf[4] == 0x44 ) <span class="rem">//Set Timeout</span><br />    {<br />      <span class="kwrd">if</span> (ANTbuf[5] == 0)<br />      {<br />        Serial.println(<span class="str">&quot;Set Timeout: No Error&quot;</span>);<br />      }      <br />    }<br />    <span class="kwrd">else</span> <span class="kwrd">if</span> (ANTbuf[4] == 0x4B ) <span class="rem">//Open Channel</span><br />    {<br />      <span class="kwrd">if</span> (ANTbuf[5] == 0)<br />      {<br />        Serial.println(<span class="str">&quot;Open Channel: No Error&quot;</span>);<br />      }      <br />    }<br />  }<br />  <br /><span class="rem">//   for(int i = 0 ; i &lt;= ANTlength ; i++)</span><br /><span class="rem">//   {</span><br /><span class="rem">//     Serial.print(ANTbuf[i], HEX);</span><br /><span class="rem">//     Serial.print(&quot; &quot;);</span><br /><span class="rem">//   }</span><br />}<br /><br /><span class="kwrd">void</span> callback()<br />{<br />  wipe = 1;<br />  eventcount++;<br />  ANT_cranktick_OLD = ANT_cranktick;<br />  ANT_cranktick = millis();<br />  ANT_Period += uint16_t(<span class="kwrd">double</span>(ANT_cranktick - ANT_cranktick_OLD)*2.048); <span class="rem">// divide 1000 and in </span><br />  ANT_icad = uint8_t(<span class="kwrd">long</span>(60000/(ANT_cranktick - ANT_cranktick_OLD)));<br />  readadc_B_reset();<br /><br />  ANT_power += uint16_t(<span class="kwrd">double</span>(Torque_sum * (<span class="kwrd">double</span>(ANT_icad)/60)*6.28));<br />}<br /><br /><span class="kwrd">void</span> readadc_B()<br />{<br />  <span class="kwrd">if</span> (wipe == 1)<br />  {<br />    ADC_L = 0;<br />    ADCL_count = 0;<br />    ADC_R = 0;<br />    ADCR_count =0;<br />    wipe = 0;<br />  }<br />  <span class="kwrd">else</span> <span class="kwrd">if</span> (wipe == 0)<br />  {<br />    <span class="kwrd">for</span> (<span class="kwrd">int</span> i = 0; i &lt; 100; i++)<br />    {<br />      ADC_L += <span class="kwrd">long</span>(readadcL());<br />      ADCL_count++;<br />      ADC_R += <span class="kwrd">long</span>(readadcR());<br />      ADCR_count++;<br />      Crank_Pickup();<br />    }<br />  }<br />}<br /><br /><span class="kwrd">void</span> Crank_Pickup()<br />{<br />  <span class="kwrd">int</span> reading = digitalRead(Mag_pickup);<br />  <span class="kwrd">if</span> (reading != lastButtonState) {<br />    <span class="rem">// reset the debouncing timer</span><br />    lastDebounceTime = millis();<br />    sent = 0;<br />  } <br />  <br />  <span class="kwrd">if</span> ((millis() - lastDebounceTime) &gt; debounceDelay) {<br />      buttonState = reading;<br />      <span class="kwrd">if</span> (buttonState == 1)<br />      {<br />        <span class="kwrd">if</span> (sent == 0)<br />        {<br /><span class="rem">//          Serial.println(eventcount);</span><br /><span class="rem">//          eventcount++;  </span><br />          sent = 1;  <br />          callback();    <br />        }<br />      }<br />   <br />  }<br />  lastButtonState = reading;<br /><span class="rem">//  if (digitalRead(Mag_pickup) == 1)</span><br /><span class="rem">//  {</span><br /><span class="rem">//    if ((millis()-ANT_cranktick_OLD) &gt; 350)</span><br /><span class="rem">//    {</span><br /><span class="rem">//      //callback();</span><br /><span class="rem">//</span><br /><span class="rem">//    }</span><br /><span class="rem">//  }</span><br />        <br />}<br /><br /><span class="kwrd">void</span> readadc_B_reset()<br />{<br />    ADC_L = ADC_L/ADCL_count;<br />    ADC_R = ADC_R/ADCR_count;<br />    <br />    TorqueL = <span class="kwrd">double</span>((<span class="kwrd">double</span>(zeroL) - <span class="kwrd">double</span>(ADC_L)) * 0.1725/22.7); <br />    <span class="kwrd">if</span> (TorqueL &lt; 0)<br />    {<br />      TorqueL = 0;<br />    }<br />    TorqueR = <span class="kwrd">double</span>((<span class="kwrd">double</span>(ADC_R) - <span class="kwrd">double</span>(zeroR)) * 0.1725/21.7);<br />    <span class="kwrd">if</span> (TorqueR &lt; 0)<br />    {<br />      TorqueR = 0;<br />    }<br />    Torque_sum = TorqueL + TorqueR;<br />    ANT_Torque += uint16_t(<span class="kwrd">double</span>(Torque_sum*32.0));<br />    <br />    <span class="kwrd">if</span> (Torque_sum &lt; 0.5)<br />    {<br />        ANT_LR = 50;<br />        ANT_LR = ANT_LR^0x80;<br />    }<br />    <span class="kwrd">else</span><br />    {<br />        ANT_LR = uint8_t(<span class="kwrd">double</span>((TorqueR / Torque_sum) * 100));<br />        ANT_LR = ANT_LR^0x80;<br />    }<br /><span class="rem">//    Serial.print(&quot; ADCsum(L/R)-C: &quot;);</span><br /><span class="rem">//    Serial.print(ADC_L);</span><br /><span class="rem">//    Serial.print(&quot; / &quot;);</span><br /><span class="rem">//    Serial.print(ADC_R);</span><br /><span class="rem">//    Serial.print(&quot;Torque_L: &quot;);</span><br /><span class="rem">//    Serial.print(TorqueL,2);</span><br /><span class="rem">//    Serial.print(&quot; Torque_R: &quot;);</span><br /><span class="rem">//    Serial.print(TorqueR,2);</span><br /><span class="rem">//    Serial.print(&quot; Torque_Sum: &quot;);</span><br /><span class="rem">//    Serial.print(Torque_sum,2);</span><br /><span class="rem">//    Serial.print(&quot; ANT_Torque: &quot;);</span><br /><span class="rem">//    Serial.print(ANT_Torque);</span><br /><span class="rem">//    Serial.print(&quot; ANT_LR: &quot;);</span><br /><span class="rem">//    Serial.println(ANT_LR);</span><br />    ADC_L = 0;<br />    ADCL_count = 0;<br />    ADC_R = 0;<br />    ADCR_count = 0;<br />}<br /><br /><span class="kwrd">short</span> readadcL1000()<br />{<br />   <span class="kwrd">long</span> adcl = 0;  <span class="rem">//initialize a long variable</span><br />   <span class="kwrd">for</span> (<span class="kwrd">int</span> i=0; i &lt; 1000; i++){adcl += <span class="kwrd">long</span>(readadcL());} <span class="rem">//Read 1000 times</span><br />   <span class="kwrd">return</span> (<span class="kwrd">short</span>((adcl/1000))); <span class="rem">//Output the average</span><br />}<br /><br /><span class="kwrd">short</span> readadcR1000()<br />{<br />   <span class="kwrd">long</span> adcr = 0;  <span class="rem">//initialize a long variable</span><br />   <span class="kwrd">for</span> (<span class="kwrd">int</span> i=0; i &lt; 1000; i++){adcr += <span class="kwrd">long</span>(readadcR());} <span class="rem">//Read 1000 times</span><br />   <span class="kwrd">return</span> (<span class="kwrd">short</span>((adcr/1000))); <span class="rem">//Output the average</span><br />}<br /><br /><span class="kwrd">short</span> zeroadcL()<br />{<br />   <span class="kwrd">long</span> adcl = 0;  <span class="rem">//initialize a long variable</span><br />   <span class="kwrd">for</span> (<span class="kwrd">int</span> i=0; i &lt; 20000; i++){adcl += <span class="kwrd">long</span>(readadcL());} <span class="rem">//Read 1000 times</span><br />   <span class="kwrd">return</span> (<span class="kwrd">short</span>((adcl/20000))); <span class="rem">//Output the average</span><br />}<br /><br /><span class="kwrd">short</span> zeroadcR()<br />{<br />   <span class="kwrd">long</span> adcr = 0;  <span class="rem">//initialize a long variable</span><br />   <span class="kwrd">for</span> (<span class="kwrd">int</span> i=0; i &lt; 20000; i++){adcr += <span class="kwrd">long</span>(readadcR());} <span class="rem">//Read 1000 times</span><br />   <span class="kwrd">return</span> (<span class="kwrd">short</span>((adcr/20000))); <span class="rem">//Output the average</span><br />}<br /><br /><span class="kwrd">short</span> readadcL() {<br />  digitalWrite(slaveSelectPinL,LOW);   <span class="rem">// take the SS pin low to select the chip:</span><br />  <span class="kwrd">byte</span> one = SPI.transfer(0xFF);  <span class="rem">//  send in the address and value via SPI:</span><br />  <span class="kwrd">byte</span> two = SPI.transfer(0xFF);<br />  <span class="kwrd">byte</span> three = SPI.transfer(0xFF);<br />  digitalWrite(slaveSelectPinL,HIGH);   <span class="rem">// take the SS pin high to de-select the chip:</span><br />  <span class="kwrd">return</span> (one &lt;&lt; 14 | two &lt;&lt; 6 | three &gt;&gt; 2); <span class="rem">//output the value from the three bytes as one short</span><br />}<br /><br /><span class="kwrd">short</span> readadcR() {<br />  digitalWrite(slaveSelectPinR,LOW);   <span class="rem">// take the SS pin low to select the chip:</span><br />  <span class="kwrd">byte</span> one = SPI.transfer(0xFF);  <span class="rem">//  send in the address and value via SPI:</span><br />  <span class="kwrd">byte</span> two = SPI.transfer(0xFF);<br />  <span class="kwrd">byte</span> three = SPI.transfer(0xFF);<br />  digitalWrite(slaveSelectPinR,HIGH);   <span class="rem">// take the SS pin high to de-select the chip:</span><br />  <span class="kwrd">return</span> (one &lt;&lt; 14 | two &lt;&lt; 6 | three &gt;&gt; 2); <span class="rem">//output the value from the three bytes as one short</span><br />}<br /><br />UCHAR checkSum(UCHAR *data, <span class="kwrd">int</span> length)<br />{<br />   <span class="kwrd">int</span> i;<br />   UCHAR chksum = data[0];<br />   <span class="kwrd">for</span> (i = 1; i &lt; length; i++)<br />      chksum ^= data[i];  <span class="rem">// +1 since skip prefix sync code, we already counted it</span><br />   <span class="kwrd">return</span> chksum;<br />}<br /><br /><span class="kwrd">void</span> reset ()<br />{<br />   uint8_t buf[5];<br />   buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />   buf[1] = 0x01; <span class="rem">// LENGTH Byte</span><br />   buf[2] = MESG_SYSTEM_RESET_ID; <span class="rem">// ID Byte</span><br />   buf[3] = 0x00; <span class="rem">// Data Byte N (N=LENGTH)</span><br />   buf[4] = checkSum(buf,4);<br />   ANTsend(buf,5);<br />}<br />    <br />    <br /><span class="kwrd">void</span> SetNetwork()<br />{<br />    uint8_t buf[13];<br />    buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />    buf[1] = 0x09; <span class="rem">// LENGTH Byte</span><br />    buf[2] = MESG_NETWORK_KEY_ID; <span class="rem">// ID Byte</span><br />    buf[3] = 0x00; <span class="rem">// Data Byte N (</span><br />    buf[4] = 0xXX; <span class="rem">// Data Byte N (N=LENGTH)</span><br />    buf[5] = 0xXX; <span class="rem">// Data Byte N (N=LENGTH)</span><br />    buf[6] = 0xXX; <span class="rem">// Data Byte N (N=LENGTH)</span><br />    buf[7] = 0xXX; <span class="rem">// Data Byte N (N=LENGTH)</span><br />    buf[8] = 0xXX; <span class="rem">// Data Byte N (N=LENGTH)</span><br />    buf[9] = 0xXX; <span class="rem">// Data Byte N (N=LENGTH)</span><br />    buf[10] = 0xXX; <span class="rem">// Data Byte N (N=LENGTH)</span><br />    buf[11] = 0xXX; <span class="rem">// Data Byte N (N=LENGTH)</span><br />    buf[12] = checkSum(buf, 12);<br />    ANTsend(buf,13);<br />}<br /><span class="kwrd">void</span> assignch()<br />{<br />   uint8_t buf[7];<br />   buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />   buf[1] = 0x03; <span class="rem">// LENGTH Byte</span><br />   buf[2] = MESG_ASSIGN_CHANNEL_ID; <span class="rem">// ID Byte</span><br />   buf[3] = 0x00; <span class="rem">// Channel Number</span><br />   buf[4] = 0x10; <span class="rem">// Channel Type</span><br />   buf[5] = 0x00; <span class="rem">// Network ID</span><br />   buf[6] = checkSum(buf,6);<br />   ANTsend(buf,7);<br />}<br /><br /><span class="kwrd">void</span> SetChID()<br />{<br />    uint8_t buf[9];<br />    buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />    buf[1] = 0x05; <span class="rem">// LENGTH Byte</span><br />    buf[2] = MESG_CHANNEL_ID_ID; <span class="rem">// Assign Channel ID 0x51</span><br />    buf[3] = 0x00; <span class="rem">// channel number</span><br />    buf[4] = 0x05; <span class="rem">// Device number</span><br />    buf[5] = 0x00; <span class="rem">// Device number</span><br />    buf[6] = 0x0B; <span class="rem">//Device type ID</span><br />    buf[7] = 0x00; <span class="rem">//Transmission type -CHANGED</span><br />    buf[8] = checkSum(buf, 8);<br />    ANTsend(buf,9);<br />}<br /><br /><span class="kwrd">void</span> ANTsend(uint8_t buf[], <span class="kwrd">int</span> length){<br />   <span class="rem">//Serial.print(&quot;ANTsend TX: &quot;);</span><br />   <span class="kwrd">for</span>(<span class="kwrd">int</span> i = 0 ; i &lt;= length ; i++)<br />   {<br />     <span class="rem">//Serial.print(buf[i], HEX);</span><br />     <span class="rem">//Serial.print(&quot; &quot;);</span><br />     Serial1.write(buf[i]);<br />   }<br />   <span class="rem">//Serial.println(&quot;&quot;);</span><br />}<br /><span class="kwrd">void</span> SetFreq()<br />{<br />    uint8_t buf[6];<br />    buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />    buf[1] = 0x02; <span class="rem">// LENGTH Byte</span><br />    buf[2] = MESG_CHANNEL_RADIO_FREQ_ID; <span class="rem">// Set Channel RF Freq 0x45</span><br />    buf[3] = 0x00; <span class="rem">// Channel number</span><br />    buf[4] = 0x39; <span class="rem">// Frequency</span><br />    buf[5] = checkSum(buf, 5);<br />    ANTsend(buf,6);<br />}<br /><br /><span class="kwrd">void</span> SetPeriod()<br />{<br />    uint8_t buf[7];<br />    buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />    buf[1] = 0x03; <span class="rem">// LENGTH Byte</span><br />    buf[2] = MESG_CHANNEL_MESG_PERIOD_ID; <span class="rem">// Set channel period 0x43</span><br />    buf[3] = 0x00; <span class="rem">// Channel number</span><br />    buf[4] = 0xF6; <span class="rem">// Messaging Period byte1</span><br />    buf[5] = 0x1f; <span class="rem">// Messaging period byte2</span><br />    buf[6] = checkSum(buf, 6);<br />    ANTsend(buf,7);<br />}<br /><br /><span class="kwrd">void</span> SetPower()<br />{<br />    uint8_t buf[6];<br />    buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />    buf[1] = 0x02; <span class="rem">// LENGTH Byte</span><br />    buf[2] = MESG_RADIO_TX_POWER_ID; <span class="rem">// Set Tx Power 0x47</span><br />    buf[3] = 0x00; <span class="rem">// Channel Number</span><br />    buf[4] = 0x03; <span class="rem">// Tx power</span><br />    buf[5] = checkSum(buf, 5);<br />    ANTsend(buf,6);<br />}<br /><br /><span class="kwrd">void</span> SetTimeout()<br />{<br />    uint8_t buf[6];<br />    buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />    buf[1] = 0x02; <span class="rem">// LENGTH Byte</span><br />    buf[2] = MESG_CHANNEL_SEARCH_TIMEOUT_ID; <span class="rem">// Set Channel Search Timeout 0x44</span><br />    buf[3] = 0x00; <span class="rem">// Channel number</span><br />    buf[4] = 0x1E; <span class="rem">// Set timeout</span><br />    buf[5] = checkSum(buf, 5);<br />    ANTsend(buf,6);<br />}<br /><br /><span class="kwrd">void</span> OpenChannel()<br />{<br />    uint8_t buf[5];<br />    buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />    buf[1] = 0x01; <span class="rem">// LENGTH Byte</span><br />    buf[2] = MESG_OPEN_CHANNEL_ID; <span class="rem">// ID Byte 0x4B</span><br />    buf[3] = 0x00;<br />    buf[4] = checkSum(buf, 4);<br />    ANTsend(buf,5);<br />}<br /><br /><span class="kwrd">void</span> initiate()<br />{<br />    SetNetwork();<br />    delay(100);<br />    assignch();<br />    delay(100);<br />    SetChID();<br />    delay(100);<br />    SetFreq();<br />    delay(100);<br />    SetPeriod();<br />    delay(100);<br />    SetPower();<br />    delay(100);<br />    SetTimeout();<br />    delay(100);<br />    OpenChannel();<br />    delay(100);<br /><br />}<br /><br /><span class="kwrd">void</span> basicpower()<br />{<br />    uint8_t buf[13];<br />    buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />    buf[1] = 0x09; <span class="rem">// LENGTH Byte</span><br />    buf[2] = MESG_BROADCAST_DATA_ID; <span class="rem">// 0x4E</span><br />    buf[3] = 0x00;  <span class="rem">// Channel number</span><br />    buf[4] = 0x10; <span class="rem">// Basic power page identifier</span><br />    buf[5] = eventcount; <span class="rem">// Event count</span><br />    buf[6] = ANT_LR; <span class="rem">// Power differential</span><br />    buf[7] = ANT_icad; <span class="rem">// Instant Cadence</span><br />    buf[8] = <span class="kwrd">byte</span>(ANT_power &amp; 0xFF); <span class="rem">// Accumulated power LSB</span><br />    buf[9] = <span class="kwrd">byte</span>((ANT_power &gt;&gt; 8) &amp; 0xFF); <span class="rem">// Accumulated power MSB</span><br />    buf[10] = 0x06; <span class="rem">// Instant power LSB</span><br />    buf[11] = 0x07; <span class="rem">// Instant power MSB</span><br />    buf[12] = checkSum(buf, 12);<br />    ANTsend(buf, 13);<br />}<br /><br /><span class="kwrd">void</span> cranktorque()<br />{<br />    uint8_t buf[13];<br />    buf[0] = MESG_TX_SYNC; <span class="rem">// SYNC Byte</span><br />    buf[1] = 0x09; <span class="rem">// LENGTH Byte</span><br />    buf[2] = MESG_BROADCAST_DATA_ID;<br />    buf[3] = 0x00;  <span class="rem">// Channel number</span><br />    buf[4] = 0x12; <span class="rem">// Crank torque identifier</span><br />    buf[5] = eventcount; <span class="rem">// Update Event count</span><br />    buf[6] = eventcount; <span class="rem">// Crank ticks</span><br />    buf[7] = ANT_icad; <span class="rem">// Instant Cadence</span><br />    buf[8] = <span class="kwrd">byte</span>(ANT_Period &amp; 0xFF); <span class="rem">// Accumulated Crank Period LSB</span><br />    buf[9] = <span class="kwrd">byte</span>((ANT_Period &gt;&gt; 8) &amp; 0xFF); <span class="rem">// Accumulated Crank Period MSB</span><br />    buf[10] = <span class="kwrd">byte</span>(ANT_Torque &amp; 0xFF); <span class="rem">// Accumulated crank Torque LSB</span><br />    buf[11] = <span class="kwrd">byte</span>((ANT_Torque &gt;&gt; 8) &amp; 0xFF); <span class="rem">// Accumulated crank Torque MSB</span><br />    buf[12] = checkSum(buf, 12);<br />    ANTsend(buf, 13);<br />}</pre><br /><style type="text/css"><br />.csharpcode, .csharpcode pre<br />{<br />	font-size: small;<br />	color: black;<br />	font-family: consolas, "Courier New", courier, monospace;<br />	background-color: #ffffff;<br />	/*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt <br />{<br />	background-color: #f4f4f4;<br />	width: 100%;<br />	margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }</style>  
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'><span class='post-author vcard'>
Posted by
<span class='fn' itemprop='author' itemscope='itemscope' itemtype='http://schema.org/Person'>
<meta content='https://www.blogger.com/profile/04750593468902337123' itemprop='url'/>
<a href='https://www.blogger.com/profile/04750593468902337123' rel='author' title='author profile'>
<span itemprop='name'>Keith Wakeham</span>
</a>
</span>
</span>
<span class='post-timestamp'>
at
<meta content='http://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html' itemprop='url'/>
<a class='timestamp-link' href='http://keithhack.blogspot.nl/2013/01/v3why-it-works-now-and-power-meter-code.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2013-01-07T19:02:00-08:00'>7:02 PM</abbr></a>
</span>
<span class='post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-control blog-admin pid-1863509205'>
<a href='https://www.blogger.com/post-edit.g?blogID=831309579862171927&postID=7380089556979717873&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=831309579862171927&postID=7380089556979717873&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=831309579862171927&postID=7380089556979717873&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=831309579862171927&postID=7380089556979717873&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=831309579862171927&postID=7380089556979717873&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=831309579862171927&postID=7380089556979717873&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a><div class='goog-inline-block google-plus-share-container'><g:plusone source='blogger:blog:plusone' href='http://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html' size='medium' width='300' annotation='inline'/></div>
</div>
</div>
<div class='post-footer-line post-footer-line-2'><span class='post-labels'>
Labels:
<a href='http://keithhack.blogspot.nl/search/label/ANT%2B' rel='tag'>ANT+</a>,
<a href='http://keithhack.blogspot.nl/search/label/power%20meter' rel='tag'>power meter</a>
</span>
</div>
<div class='post-footer-line post-footer-line-3'><span class='post-location'>
</span>
</div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>2 comments:</h4>
<div class='comments-content'>
<script async='async' src='//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js' type='text/javascript'></script>
<script type='text/javascript'>
    (function() {
      var items = [{'id': '2855084053004702116', 'body': 'I\x26#39;m working on a project to send Cadence to the garmin unit. Where did you find the network key for the Garmin Device? Also it is always on Channel 0?\x3cbr /\x3e\x3cbr /\x3eEoin', 'timestamp': '1379551533609', 'permalink': 'http://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html?showComment\x3d1379551533609#c2855084053004702116', 'author': {'name': 'Eoin O Connell', 'avatarUrl': '//lh5.googleusercontent.com/-0PFl-82Srgw/AAAAAAAAAAI/AAAAAAAAABI/_ly12GP21aY/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/16768414633477193910'}, 'displayTime': 'September 18, 2013 at 5:45 PM', 'deleteclass': 'item-control blog-admin pid-2071796005'}, {'id': '9111967710891770493', 'parentId': '2855084053004702116', 'body': 'You have to become an ANT+ adopter (free at www.thisisant.com) in order to get access to the network key. I\x26#39;m not legally allowed to share it, sorry. Doesn\x26#39;t matter the channel.', 'timestamp': '1379553292270', 'permalink': 'http://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html?showComment\x3d1379553292270#c9111967710891770493', 'author': {'name': 'Keith Wakeham', 'avatarUrl': '//4.bp.blogspot.com/-fJXSAcEGmZY/UB7FF06McKI/AAAAAAAABYY/0uHT4eskics/s35/DSC_8544c.jpg', 'profileUrl': 'https://www.blogger.com/profile/04750593468902337123'}, 'displayTime': 'September 18, 2013 at 6:14 PM', 'deleteclass': 'item-control blog-admin pid-1863509205'}];
      var msgs = {'loadMore': 'Load more...', 'loading': 'Loading...', 'loaded': 'No more!', 'addComment': 'Add comment', 'reply': 'Reply', 'delete': 'Delete'};
      var config = {'blogId': '831309579862171927', 'postId': '7380089556979717873', 'feed': 'http://keithhack.blogspot.com/feeds/7380089556979717873/comments/default', 'authorName': 'Keith Wakeham', 'authorUrl': 'https://www.blogger.com/profile/04750593468902337123', 'baseUri': 'https://www.blogger.com', 'maxThreadDepth': 2};

// <![CDATA[
      var cursor = null;
      if (items && items.length > 0) {
        cursor = parseInt(items[items.length - 1].timestamp) + 1;
      }

      var bodyFromEntry = function(entry) {
        if (entry.gd$extendedProperty) {
          for (var k in entry.gd$extendedProperty) {
            if (entry.gd$extendedProperty[k].name == 'blogger.contentRemoved') {
              return '<span class="deleted-comment">' + entry.content.$t + '</span>';
            }
          }
        }
        return entry.content.$t;
      }

      var parse = function(data) {
        cursor = null;
        var comments = [];
        if (data && data.feed && data.feed.entry) {
          for (var i = 0, entry; entry = data.feed.entry[i]; i++) {
            var comment = {};
            // comment ID, parsed out of the original id format
            var id = /blog-(\d+).post-(\d+)/.exec(entry.id.$t);
            comment.id = id ? id[2] : null;
            comment.body = bodyFromEntry(entry);
            comment.timestamp = Date.parse(entry.published.$t) + '';
            if (entry.author && entry.author.constructor === Array) {
              var auth = entry.author[0];
              if (auth) {
                comment.author = {
                  name: (auth.name ? auth.name.$t : undefined),
                  profileUrl: (auth.uri ? auth.uri.$t : undefined),
                  avatarUrl: (auth.gd$image ? auth.gd$image.src : undefined)
                };
              }
            }
            if (entry.link) {
              if (entry.link[2]) {
                comment.link = comment.permalink = entry.link[2].href;
              }
              if (entry.link[3]) {
                var pid = /.*comments\/default\/(\d+)\?.*/.exec(entry.link[3].href);
                if (pid && pid[1]) {
                  comment.parentId = pid[1];
                }
              }
            }
            comment.deleteclass = 'item-control blog-admin';
            if (entry.gd$extendedProperty) {
              for (var k in entry.gd$extendedProperty) {
                if (entry.gd$extendedProperty[k].name == 'blogger.itemClass') {
                  comment.deleteclass += ' ' + entry.gd$extendedProperty[k].value;
                } else if (entry.gd$extendedProperty[k].name == 'blogger.displayTime') {
                  comment.displayTime = entry.gd$extendedProperty[k].value;
                }
              }
            }
            comments.push(comment);
          }
        }
        return comments;
      };

      var paginator = function(callback) {
        if (hasMore()) {
          var url = config.feed + '?alt=json&v=2&orderby=published&reverse=false&max-results=50';
          if (cursor) {
            url += '&published-min=' + new Date(cursor).toISOString();
          }
          window.bloggercomments = function(data) {
            var parsed = parse(data);
            cursor = parsed.length < 50 ? null
                : parseInt(parsed[parsed.length - 1].timestamp) + 1
            callback(parsed);
            window.bloggercomments = null;
          }
          url += '&callback=bloggercomments';
          var script = document.createElement('script');
          script.type = 'text/javascript';
          script.src = url;
          document.getElementsByTagName('head')[0].appendChild(script);
        }
      };
      var hasMore = function() {
        return !!cursor;
      };
      var getMeta = function(key, comment) {
        if ('iswriter' == key) {
          var matches = !!comment.author
              && comment.author.name == config.authorName
              && comment.author.profileUrl == config.authorUrl;
          return matches ? 'true' : '';
        } else if ('deletelink' == key) {
          return config.baseUri + '/delete-comment.g?blogID='
               + config.blogId + '&postID=' + comment.id;
        } else if ('deleteclass' == key) {
          return comment.deleteclass;
        }
        return '';
      };

      var replybox = null;
      var replyUrlParts = null;
      var replyParent = undefined;

      var onReply = function(commentId, domId) {
        if (replybox == null) {
          // lazily cache replybox, and adjust to suit this style:
          replybox = document.getElementById('comment-editor');
          if (replybox != null) {
            replybox.height = '250px';
            replybox.style.display = 'block';
            replyUrlParts = replybox.src.split('#');
          }
        }
        if (replybox && (commentId !== replyParent)) {
          replybox.src = '';
          document.getElementById(domId).insertBefore(replybox, null);
          replybox.src = replyUrlParts[0]
              + (commentId ? '&parentID=' + commentId : '')
              + '#' + replyUrlParts[1];
          replyParent = commentId;
        }
      };

      var hash = (window.location.hash || '#').substring(1);
      var startThread, targetComment;
      if (/^comment-form_/.test(hash)) {
        startThread = hash.substring('comment-form_'.length);
      } else if (/^c[0-9]+$/.test(hash)) {
        targetComment = hash.substring(1);
      }

      // Configure commenting API:
      var configJso = {
        'maxDepth': config.maxThreadDepth
      };
      var provider = {
        'id': config.postId,
        'data': items,
        'loadNext': paginator,
        'hasMore': hasMore,
        'getMeta': getMeta,
        'onReply': onReply,
        'rendered': true,
        'initComment': targetComment,
        'initReplyThread': startThread,
        'config': configJso,
        'messages': msgs
      };

      var render = function() {
        if (window.goog && window.goog.comments) {
          var holder = document.getElementById('comment-holder');
          window.goog.comments.render(holder, provider);
        }
      };

      // render now, or queue to render when library loads:
      if (window.goog && window.goog.comments) {
        render();
      } else {
        window.goog = window.goog || {};
        window.goog.comments = window.goog.comments || {};
        window.goog.comments.loadQueue = window.goog.comments.loadQueue || [];
        window.goog.comments.loadQueue.push(render);
      }
    })();
// ]]>
  </script>
<div id='comment-holder'>
<div id='bc_0_3C' kind='c'><div id='bc_0_3CT'><div id='bc_0_2T' class='comment-thread' kind='r'  t='0' u='0'><ol id='bc_0_2TB'><li id='bc_0_1B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh5.googleusercontent.com/-0PFl-82Srgw/AAAAAAAAAAI/AAAAAAAAABI/_ly12GP21aY/s35-c/photo.jpg'></img></div><div id='c2855084053004702116' class='comment-block'><div id='bc_0_1M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='https://www.blogger.com/profile/16768414633477193910'>Eoin O Connell</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html?showComment=1379551533609#c2855084053004702116'>September 18, 2013 at 5:45 PM</a></span></div><p id='bc_0_1MC' class='comment-content'>I&#39;m working on a project to send Cadence to the garmin unit. Where did you find the network key for the Garmin Device? Also it is always on Channel 0?<br /><br />Eoin</p><span id='bc_0_1MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-2071796005'><a o='d' target='_self' href='https://www.blogger.com/delete-comment.g?blogID=831309579862171927&amp;postID=2855084053004702116'>Delete</a></span></span></div><div id='bc_0_1BR' class='comment-replies'><span id='bc_0_1b+seedBODsD' kind='d'><div id='bc_0_0T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_0TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_0TA' class='thread-arrow'></span><span id='bc_0_0TN' class='thread-count'><span id='bc_0_0TNT' style='display: none;'></span><span id='bc_0_0TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_0TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_0TC' class='thread-chrome thread-expanded'><div><li id='bc_0_0B' class='comment' kind='b'><div class='avatar-image-container'><img src='//4.bp.blogspot.com/-fJXSAcEGmZY/UB7FF06McKI/AAAAAAAABYY/0uHT4eskics/s35/DSC_8544c.jpg'></img></div><div id='c9111967710891770493' class='comment-block'><div id='bc_0_0M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='https://www.blogger.com/profile/04750593468902337123'>Keith Wakeham</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html?showComment=1379553292270#c9111967710891770493'>September 18, 2013 at 6:14 PM</a></span></div><p id='bc_0_0MC' class='comment-content'>You have to become an ANT+ adopter (free at www.thisisant.com) in order to get access to the network key. I&#39;m not legally allowed to share it, sorry. Doesn&#39;t matter the channel.</p><span id='bc_0_0MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1863509205'><a o='d' target='_self' href='https://www.blogger.com/delete-comment.g?blogID=831309579862171927&amp;postID=9111967710891770493'>Delete</a></span></span></div><div id='bc_0_0BR' class='comment-replies'></div><div id='bc_0_0B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_0I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_0T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_1B_box' class='comment-replybox-single'></div></li></ol><div id='bc_0_2I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Add comment</a></div><div id='bc_0_2T_box' class='comment-replybox-thread'></div><div id='bc_0_2L' class='loadmore loaded' kind='rb'><a href='javascript:;' target='_self'>Load more...</a></div></div></div></div>
</div>
</div>
<p class='comment-footer'>
<div class='comment-form'>
<a name='comment-form'></a>
<p>
</p>
<a href='https://www.blogger.com/comment-iframe.g?blogID=831309579862171927&postID=7380089556979717873' id='comment-editor-src'></a>
<iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410px' id='comment-editor' name='comment-editor' src='' width='100%'></iframe>
<script src='https://www.blogger.com/static/v1/jsbin/3223910711-comment_from_post_iframe.js' type='text/javascript'></script>
<script type='text/javascript'>
      BLOG_CMT_createIframe('https://www.blogger.com/rpc_relay.html');
    </script>
</div>
</p>
<div id='backlinks-container'>
<div id='Blog1_backlinks-container'>
</div>
</div>
</div>
</div>

        </div></div>
      
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://keithhack.blogspot.nl/2013/01/v3video-and-tutorial-coming-soon.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>Newer Post</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://keithhack.blogspot.nl/2013/01/v3-almost-ready-for-prime-time-demoing.html' id='Blog1_blog-pager-older-link' title='Older Post'>Older Post</a>
</span>
<a class='home-link' href='http://keithhack.blogspot.nl/'>Home</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://keithhack.blogspot.com/feeds/7380089556979717873/comments/default' target='_blank' type='application/atom+xml'>Post Comments (Atom)</a>
</div>
</div>
<script type='text/javascript'>
    window.___gcfg = { 'lang': 'en' };
  </script>
</div></div>
</div>
</div>
<div class='column-left-outer'>
<div class='column-left-inner'>
<aside>
</aside>
</div>
</div>
<div class='column-right-outer'>
<div class='column-right-inner'>
<aside>
<div class='sidebar section' id='sidebar-right-1'><div class='widget BlogArchive' data-version='1' id='BlogArchive1'>
<h2>Blog Archive</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2017/'>
2017
</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2017/05/'>
May
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2016/'>
2016
</a>
<span class='post-count' dir='ltr'>(4)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2016/12/'>
December
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2016/11/'>
November
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2016/10/'>
October
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2016/09/'>
September
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2014/'>
2014
</a>
<span class='post-count' dir='ltr'>(10)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2014/09/'>
September
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2014/05/'>
May
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2014/03/'>
March
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2014/02/'>
February
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2014/01/'>
January
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/'>
2013
</a>
<span class='post-count' dir='ltr'>(84)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/12/'>
December
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/11/'>
November
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/10/'>
October
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/09/'>
September
</a>
<span class='post-count' dir='ltr'>(7)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/08/'>
August
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/07/'>
July
</a>
<span class='post-count' dir='ltr'>(12)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/06/'>
June
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/05/'>
May
</a>
<span class='post-count' dir='ltr'>(8)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/04/'>
April
</a>
<span class='post-count' dir='ltr'>(8)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/03/'>
March
</a>
<span class='post-count' dir='ltr'>(10)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/02/'>
February
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2013/01/'>
January
</a>
<span class='post-count' dir='ltr'>(13)</span>
<ul class='posts'>
<li><a href='http://keithhack.blogspot.nl/2013/01/ads1247-ads1248.html'>ADS1247 / ADS1248</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/bt20-to-ant-video.html'>BT2.0 to ANT+ Video</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/can-i-instrument-carbon-crank.html'>Can I instrument a Carbon Crank?</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/bt-20-to-ant-so-cheap-and-easy.html'>BT 2.0 to ANT+ - So Cheap and Easy</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/v3-accuracy.html'>V3 Accuracy</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/v3power-meterthe-complete-how-to.html'>V3&#8211;Power Meter&#8211;The Complete How To</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/v3-demo.html'>V3 - Demo</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/v3-video-editing.html'>V3 - Video Editing</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/v3video-and-tutorial-coming-soon.html'>V3&#8211;Video and Tutorial Coming Soon</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/v3why-it-works-now-and-power-meter-code.html'>V3&#8211;Why it works now and the Power Meter CODE!</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/v3-almost-ready-for-prime-time-demoing.html'>V3-Almost ready for prime time demoing</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/generic-updates-for-january-2013.html'>Generic Updates for January 2013</a></li>
<li><a href='http://keithhack.blogspot.nl/2013/01/the-bluetooth-ant-bridge-concept.html'>The Bluetooth-ANT Bridge concept</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2012/'>
2012
</a>
<span class='post-count' dir='ltr'>(33)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2012/12/'>
December
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2012/11/'>
November
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2012/10/'>
October
</a>
<span class='post-count' dir='ltr'>(7)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2012/09/'>
September
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://keithhack.blogspot.nl/2012/08/'>
August
</a>
<span class='post-count' dir='ltr'>(9)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=831309579862171927&widgetType=BlogArchive&widgetId=BlogArchive1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("BlogArchive1"));' target='configBlogArchive1' title='Edit'>
<img alt='' height='18' src='https://resources.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget Profile' data-version='1' id='Profile1'>
<h2>Contributors</h2>
<div class='widget-content'>
<ul>
<li><a class='profile-name-link g-profile' href='https://www.blogger.com/profile/04750593468902337123' style='background-image: url(//www.blogger.com/img/logo-16.png);'>Keith Wakeham</a></li>
<li><a class='profile-name-link g-profile' href='https://www.blogger.com/profile/03410693190845470154' style='background-image: url(//www.blogger.com/img/logo-16.png);'>Mlle.</a></li>
</ul>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=831309579862171927&widgetType=Profile&widgetId=Profile1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("Profile1"));' target='configProfile1' title='Edit'>
<img alt='' height='18' src='https://resources.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div></div>
</aside>
</div>
</div>
</div>
<div style='clear: both'></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class='main-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<footer>
<div class='footer-outer'>
<div class='footer-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left footer-fauxborder-left'>
<div class='fauxborder-right footer-fauxborder-right'></div>
<div class='region-inner footer-inner'>
<div class='foot no-items section' id='footer-1'></div>
<table border='0' cellpadding='0' cellspacing='0' class='section-columns columns-2'>
<tbody>
<tr>
<td class='first columns-cell'>
<div class='foot no-items section' id='footer-2-1'></div>
</td>
<td class='columns-cell'>
<div class='foot no-items section' id='footer-2-2'></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class='foot section' id='footer-3'><div class='widget Attribution' data-version='1' id='Attribution1'>
<div class='widget-content' style='text-align: center;'>
Awesome Inc. theme. Powered by <a href='https://www.blogger.com' target='_blank'>Blogger</a>.
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=831309579862171927&widgetType=Attribution&widgetId=Attribution1&action=editWidget&sectionId=footer-3' onclick='return _WidgetManager._PopupConfig(document.getElementById("Attribution1"));' target='configAttribution1' title='Edit'>
<img alt='' height='18' src='https://resources.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div></div>
</div>
</div>
<div class='footer-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class='content-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<script type='text/javascript'>
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script>
<script type='text/javascript'>

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38950747-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script type='text/javascript'>

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38950747-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script src='https://apis.google.com/js/plusone.js' type='text/javascript'></script>
<!--Het is jouw verantwoordelijkheid om je bezoekers te laten weten dat je cookies gebruikt op je blog. Zie http://www.blogger.com/go/cookiechoices voor meer informatie.-->
<script defer='' src='/js/cookiechoices.js'></script>
<script>
    document.addEventListener('DOMContentLoaded', function(event) {
      window.cookieChoices && cookieChoices.showCookieConsentBar && cookieChoices.showCookieConsentBar(
          (window.cookieOptions && cookieOptions.msg) || 'Deze site gebruikt cookies van Google om services te leveren, advertenties te personaliseren en verkeer te analyseren. Informatie over je gebruik van deze site wordt gedeeld met Google. Als je deze site gebruikt, ga je akkoord met het gebruik van cookies.',
          (window.cookieOptions && cookieOptions.close) || 'Ik snap het',
          (window.cookieOptions && cookieOptions.learn) || 'Meer informatie',
          (window.cookieOptions && cookieOptions.link) || 'https://www.blogger.com/go/blogspot-cookies');
    });
  </script>

<script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/1909267815-widgets.js"></script>
<script type='text/javascript'>
window['__wavt'] = 'AOuZoY7EJSmFkmLglT95hJ1GYPsgZjkJqg:1506611240007';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d831309579862171927','//keithhack.blogspot.nl/2013/01/v3why-it-works-now-and-power-meter-code.html','831309579862171927');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '831309579862171927', 'title': 'Keith Hack', 'url': 'http://keithhack.blogspot.nl/2013/01/v3why-it-works-now-and-power-meter-code.html', 'canonicalUrl': 'http://keithhack.blogspot.com/2013/01/v3why-it-works-now-and-power-meter-code.html', 'homepageUrl': 'http://keithhack.blogspot.nl/', 'searchUrl': 'http://keithhack.blogspot.nl/search', 'canonicalHomepageUrl': 'http://keithhack.blogspot.com/', 'blogspotFaviconUrl': 'http://keithhack.blogspot.nl/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': false, 'httpsEnabled': true, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Keith Hack - Atom\x22 href\x3d\x22http://keithhack.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Keith Hack - RSS\x22 href\x3d\x22http://keithhack.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Keith Hack - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/831309579862171927/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Keith Hack - Atom\x22 href\x3d\x22http://keithhack.blogspot.com/feeds/7380089556979717873/comments/default\x22 /\x3e\n', 'meTag': '', 'openIdOpTag': '', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'ieCssRetrofitLinks': '\x3c!--[if IE]\x3e\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22https://www.blogger.com/static/v1/jsbin/35781802-ieretrofit.js\x22\x3e\x3c/script\x3e\n\x3c![endif]--\x3e', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/4a65a7bc1a4f39b8', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': 'Share to Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Google+', 'key': 'googlePlus', 'shareMessage': 'Share to Google+', 'target': 'googleplus'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'googlePlusShareButtonWidth': 300, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '7380089556979717873', 'postImageThumbnailUrl': 'http://lh3.ggpht.com/-DtT9GCwF4RA/UOuMNw3EgSI/AAAAAAAABq0/GHC00CZT6lU/s72-c/DSC_9045a_thumb%25255B1%25255D.jpg?imgmax\x3d800', 'postImageUrl': 'http://lh3.ggpht.com/-DtT9GCwF4RA/UOuMNw3EgSI/AAAAAAAABq0/GHC00CZT6lU/DSC_9045a_thumb%25255B1%25255D.jpg?imgmax\x3d800', 'pageName': 'V3&#8211;Why it works now and the Power Meter CODE!', 'pageTitle': 'Keith Hack: V3&#8211;Why it works now and the Power Meter CODE!'}}, {'name': 'features', 'data': {'lazy_images': 'false', 'unsupported_browser_message': 'false', 'lightbox_img_parsing': 'false', 'video_theatre_support': 'false', 'sharing_get_link_dialog': 'false', 'sharing_native': 'false'}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'name': 'custom', 'localizedName': 'Custom', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': true, 'variant': 'light', 'variantId': 'light', 'variantName': 'Light', 'localizedVariantName': 'Light'}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'V3&#8211;Why it works now and the Power Meter CODE!', 'description': '&#160;     In the above picture you&#8217;ll see the MOSI (Master out Slave in) and RTS connection point for the AP2 module on the other side. There wa...', 'featuredImage': 'http://lh3.ggpht.com/-DtT9GCwF4RA/UOuMNw3EgSI/AAAAAAAABq0/GHC00CZT6lU/DSC_9045a_thumb%25255B1%25255D.jpg?imgmax\x3d800', 'url': 'http://keithhack.blogspot.nl/2013/01/v3why-it-works-now-and-power-meter-code.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 7380089556979717873}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', null, document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/836818746-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/368954415-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', null, document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-1', null, document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', null, document.getElementById('Attribution1'), {}, 'displayModeFull'));
</script>
</body>
</html>